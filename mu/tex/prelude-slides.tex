\def\emcolor{\fgyellow}
\define[1]\code{{\fgblue\tt#1}}

\input{prelude-context.tex}

\definepapersize
  [slidepage]
  [width=78mm,height=117mm]

\setuppapersize
  [slidepage,landscape]
  [slidepage,landscape]

\setuplayout
  [backspace=.35cm,
   topspace=.0cm,
   bottomspace=.10cm,
   footer=.2cm]

\definemakeup
  [slide]
  [pagestate=start,
   top=\vfill,
   bottom=\vfill,
   headerstate=start,
   footerstate=start,
   page=yes]

\definemakeup
  [titleslide]
  [pagestate=start,
   headerstate=stop,
   footerstate=start,
   page=yes]

\def\startslide{\startmakeup[slide]}
\def\stopslide{\stopmakeup}

\startcolor[white] % set the foreground (text) colour
\setupbackgrounds
  [page]
  [background=color,
   backgroundcolor=black]

\setuphead % section heads get their own slides
  [section,subsection]
  [before={\startmakeup[titleslide]},
   after={\stopmakeup}]

\setupitemize
  [distance=-6pt,
   before={\blank[4pt]\switchtobodyfont[\listsize]},
   after={\blank[2pt]}]
\setupTABLE
  [style={\switchtobodyfont[\codesize]}]

\def\codesize{9.2pt}

\definestartstop[SynSnippetKeyword]  [\c!color=orange,\c!style=boldface]
\definestartstop[SynSnippetOperator] [\c!color=yellow]
\definestartstop[SynSnippetBoundary] [\c!color=cyan,\c!style=boldface]
\definestartstop[SynSnippet]         [DefaultSnippet]
\definestartstop[SynSnippetName]     [\c!color=,before={\it}]
\definestartstop[SynSnippetType]     [\c!color=blue]
\definestartstop[SynSnippetMagic]    [\c!color=magenta]
\definestartstop[SynSnippetQuote]    [\c!color=midgreen]
\definestartstop[SynSnippetString]   [\c!color=midgreen]
\definestartstop[SynSnippetComment]  [\c!color=brownish]

\definecolor[fgteal] [r=0.12, g=0.60, b=0.60]
\definecolor[fgblue] [r=0.40, g=0.40, b=1.00]
\definecolor[fgred] [r=0.62, g=0.12, b=0.12]
\definecolor[fggreen] [r=0.12, g=0.62, b=0.12]
\definecolor[fgyellow] [r=0.70, g=0.70, b=0.12]

\startMPinclusions[+]
fg := white;

fg_a := (0.12, 0.60, 0.60);
fg_b := (0.40, 0.40, 1.00);
fg_c := (0.62, 0.12, 0.12);
fg_d := (0.12, 0.62, 0.12);
fg_e := (0.70, 0.70, 0.12);

shade_a := (0.12, 0.12, 0.12);
shade_b := (0.24, 0.24, 0.24);
shade_c := (0.36, 0.36, 0.36);
shade_d := (0.48, 0.48, 0.48);
\stopMPinclusions

\setupMPinstance[metafun][textcolor=white]

\starttext

\setupfootertexts [{\footfont\color[white]{\hfill\currentdate}}]
\setupfootertexts [{\footfont\color[white]{\foottext}}]

\startmakeup[titleslide]
  \blank[24pt, force]
  \startalignment[center]
    \switchtobodyfont[\titlesize]      \mmtitle   \blank[medium]
    \switchtobodyfont[\subsectionsize] \mmauthors \blank[big]
  \stopalignment
\stopmakeup

\switchtobodyfont[\bodysize]
