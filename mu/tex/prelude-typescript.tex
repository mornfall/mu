\enabletrackers [fonts.missing]
\definefontfallback[djvumath] [name:dejavusansmono]
                   [ arrows, greekandcoptic, mathematicaloperators, superscriptsandsubscripts ]
\definefontfallback[aleofb][name:iosevka-slab-extralight][miscellaneoussymbols]
\definefontfallback[aleofb] [name:xccl]
                   [arrows,greekandcoptic,mathematicaloperators,superscriptsandsubscripts]
\definefontfeature[iocode] [ language=DFLT, script=latn, cv19=yes, cv31=yes, cv36=yes, cv38=yes ]

\starttypescript  [math] [xccl]
  \definefontsynonym [MathRoman] [name:xccl] [features={math\mathsizesuffix,mathextra}]
\stoptypescript

\starttypescript [sans] [lato]
  \definefontsynonym [Sans]            [name:Lato-Light]       [features=default]
  \definefontsynonym [SansItalic]      [name:Lato-LightItalic] [features=default]
  \definefontsynonym [SansBold]        [name:Lato-Regular]     [features=default]
  \definefontsynonym [SansCaps]        [Sans]                  [features=smallcaps]
\stoptypescript

\starttypescript [serif] [aleo]
  \definefontsynonym [Serif]       [name:Aleo-Light]       [features=default,fallbacks=aleofb]
  \definefontsynonym [SerifItalic] [name:Aleo-LightItalic] [features=default]
  \definefontsynonym [SerifBold]   [name:Aleo-Regular]     [features=default]
  \definefontsynonym [SerifCaps]   [Serif]                 [features=smallcaps]
\stoptypescript

\starttypescript [serif] [iosev]
  \definefontsynonym [Serif]       [name:iosevka-toil-extralight] [features=default,fallbacks=aleofb]
  \definefontsynonym [SerifItalic] [name:iosevka-toil-extralightitalic] [features=default]
  \definefontsynonym [SerifBold]   [name:iosevka-toil-demi]       [features=default]
  \definefontsynonym [SerifCaps]   [Serif]                        [features=smallcaps]
\stoptypescript

\starttypescript [sans] [iosev]
  \definefontsynonym [Sans]       [name:iosevka-aulos-extralight]       [features=default,fallbacks=aleofb]
  \definefontsynonym [SansItalic] [name:iosevka-aulos-extralightitalic] [features=default]
  \definefontsynonym [SansBold]   [name:iosevka-aulos-demi]       [features=default]
  \definefontsynonym [SansCaps]   [Sans]                          [features=smallcaps]
\stoptypescript

\starttypescript [mono] [iosev]
  \definefontsynonym [Mono]       [name:iosevka-custom-extralight] [features=iocode,fallbacks=djvumath]
  \definefontsynonym [MonoItalic] [name:iosevka-custom-extralightitalic] [features=iocode]
  \definefontsynonym [MonoBold]   [name:iosevka-custom-regular] [features=iocode]
  \definefontsynonym [MonoCaps]   [Mono] [features=smallcaps]
  % NB. This nonsensical definition conspires with SynSnippetName to get us sans-serif identifiers
  \definefontsynonym [MonoSlanted] [name:iosevka-ss02-extralight] [features=iocode]

\stoptypescript

\starttypescript  [aleo]
  \definetypeface [aleo] [rm] [serif] [aleo]     [default]
  \definetypeface [aleo] [tt] [mono]  [iosev]    [default] [rscale=0.93]
  \definetypeface [aleo] [mm] [math]  [xccl]     [default]
  \definetypeface [aleo] [ss] [sans]  [lato]     [default]
\stoptypescript

\starttypescript  [iosev]
  \definetypeface [iosev] [rm] [serif] [iosev]    [default]
  \definetypeface [iosev] [tt] [mono]  [iosev]    [default]
  \definetypeface [iosev] [mm] [math]  [xccl]     [default]
  \definetypeface [iosev] [ss] [sans]  [iosev]    [default]
\stoptypescript

% work around my inability to make \mathrm work correctly with xccl
% mathtext works, for whatever reason
\def\mfunctionlabeltext#1{\mathtext{#1}\kern-1.5pt}
\let\mathrm\mathtext

\definebodyfont[11pt]
\definebodyfont[24pt]
\definebodyfont[13pt]
\definebodyfont[12.96pt]
\definebodyfont[12.6pt]
\definebodyfont[10.8pt]
\definebodyfont[10.5pt]
\definebodyfont[8.64pt]
\definebodyfont[8.4pt]

\definefontfeature[default][default][protrusion=quality,expansion=quality]
\setupalign[hz,hanging]
\setupbodyfont[iosev]
\defineMPinstance[mathfun][format=metafun] % for svgtex
\setupMPinstance[metafun][initializsations=yes,textstyle={\setupbodyfont[sans,\notesize]}]

\def\titlesize{18pt}
\def\sectionsize{14.5pt} % only for notes
\def\subsectionsize{13pt}
\def\subsubsectionsize{8.6pt}
\def\bodysize{13pt}
\def\listsize{12pt}
\def\notesize{8pt}
\def\footsize{6.4pt}
\def\codesize{8pt}
